三条基本的数据交换：
- 寄存器 ---- 寄存器
- 寄存器 ---- ALU
- 寄存器 ---- 主存

## CPU内单总线

<img src="https://pic-1257412153.cos.ap-nanjing.myqcloud.com/images/2023/06/14/image-20230614215403391-037498.png" alt="image-20230614215403391" style="zoom:50%;" />每个寄存器都和CU连接，通过CU控制数据的传送

#### 寄存器之间的数据传送

将输入数据的`in`有效，输出数据的`out`有效

> 把`PC`内容传到`MAR`：
>
> 1. `(PC) -> Bus`：PCout有效，PC内容传到总线
> 2. `Bus->MAR`：MARin有效，总线内容传到MAR

#### 主存与CPU数据传输

> CPU从主存读取指令
>
> 1. `(PC)->Bus->MAR`：PCout和MARin有效
> 2. `1-R`：告诉主存将要读
> 3. `MEM(MAR) -> MDR`：读数据到MDR，MDRin有效
> 4. `MDR -> Bus -> IR`：MDRout、IRin有效

#### ALU数据传送

> 例如：一条加法指令
>
> 1. `Ad(IR) -> Bus -> MAR`：Marout、Marin有效  或者 ADIRout有效、MARin有效
> 2. `1-R`
> 3. `MEM(MAR) -> MDR`：读数据到MDR，MDRin有效
> 4. `MDR -> Bus -> Y`：MDRout、Yin有效
> 5. `(ACC) + (Y) -> Z`：ACCout、ALUin有效。执行加法命令
> 6. `Z -> ACC`：Zout、ACCin有效。加法结果写回ACC
>
> 单总线设计了暂存寄存器Y, 多总线就不需要Y了

## 专用通路结构

在需要数据连接的寄存器之间都建立通路

### 取值周期

1. `PC -> MAR`：$C_0$有效
2. `(MAR) -> 主存`：$C_1$
3. `1 -> R`
4. `M(MAR) -> MDR`：$C_2$
5. `(MDR)->IR`：$C_3$
6. `(PC)+1->PC`
7. `Op(IR) -> CU`：$C_4$ (可能没有OP)

