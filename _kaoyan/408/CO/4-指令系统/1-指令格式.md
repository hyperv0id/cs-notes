## 操作码 & 地址码

操作码：做什么运算

地址码：对谁做运算



## 分类

### 地址码数目

- 零地址：$OP$
  - 不需要操作数：空、停机。
  - 堆栈计算机：将两个操作数放在`栈顶`、`次栈顶`，算完后压回`栈顶`。
- 一地址：$OP(A_1)$
  - 只需要一个操作数：`+1`，去反。**3次访存**
  - 两个操作数$(ACC)OP(A_1)\rightarrow ACC$：但一个在寄存器中。**2次访存**
- 二地址
  - $(A_1)OP(A_2)\rightarrow A_1$：4次访存
- 三地址
  - $(A_1)OP(A2)\rightarrow A_3$
- 四地址
  - $(A_1)OP(A_2)\rightarrow A_3$，$A_4 \rightarrow PC$

### 指令长度

指令字长：指令的总长度

指令字长会影响取指令时间



定长指令字结构：指令系统中所有指令的长度**都相等**

变长指令字结构：指令系统中所有指令的长度**会变**

### 操作码长度

定长操作码：所有操作码都相同

可变长操作码：操作码长度可变，电路更复杂。

扩展操作码指令结构：定长指令字+可变长操作码

### 操作类型

1. 数据传送
   - LOAD：将存储器内容放到寄存器中
   - STORE：寄存器放到存储器
2. 运算类
   - 加减乘除
   - 与、亦或、或、反
   - 移位
3. 转移（改变程序执行流）
   - 无条件转移
   - 条件转移
   - 函数调用、返回
   - Trap与陷阱指令
4. 输入输出



## 扩展操作码指令字结构

指令字定长+操作码可变

注意事项：

1. **不允许短码是长码的前缀**
2. 不同指令的操作码不能相同



通常情况下：频率较高的指令分配短操作码，减少译码分析时间![image-20230608155931999](https://pic-1257412153.cos.ap-nanjing.myqcloud.com/images/2023/06/08/image-20230608155931999-365457.png) ![扩展操作码案例1](https://pic-1257412153.cos.ap-nanjing.myqcloud.com/images/2023/06/08/image-20230608154516757-40a20a.png)

上层留出$m$中状态，下层可扩展出$m\times2^n$种